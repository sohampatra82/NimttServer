<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Money Receipt Form</title>
    <link rel="shortcut icon"
        href="https://ik.imagekit.io/7de5cntkw/1692626704665-photoaidcom-cropped%20(1).jpeg?updatedAt=1738048156918"
        type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet">

    <link rel="shortcut icon" href="school.png" type="image/x-icon">
    <link rel="stylesheet" href="styel.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        .message-box {
            margin-top: 15px;
            padding: 10px 16px;
            border-radius: 6px;
            font-weight: 500;
            font-size: 14px;
            transition: opacity 0.5s ease-in-out;
            max-width: 400px;
          }
        
          .message-box.success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
          }
        
          .message-box.error {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
          }
        
          .hidden {
            display: none;
          }
        @media print {

            /* Hide all placeholders by default */
            input::placeholder,
            textarea::placeholder {
                color: transparent !important;
            }

            /* Exception: show placeholder for .amount-words inputs */
            .amount-words input::placeholder {
                color: #000 !important;
                /* Or any visible color */
            }

            /* Optional: make the placeholder look like normal text (if inputs are disabled) */
            .amount-words input[disabled]::placeholder {
                opacity: 1 !important;
            }
        }

        body {
            font-family: 'Lato', sans-serif;
            margin: 0;
            padding: 0;

            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .receipt-form p {
            text-align: left;
        }

        @media print {

            /* Remove elements not needed for print, like buttons or navigation */
            .no-print {
                display: none !important;
            }

            /* Form fields print as plain text with border */
            input,
            textarea {
                background: transparent;
                color: #000;
                font-size: 16px;
                width: 100%;
                border: 1px solid #CCCCCC;
                /* Added border */
                padding: 1px;
            }

            /* Ensure textarea displays all content without scrollbars */
            textarea {
                white-space: pre-wrap;
                overflow: visible;
                height: auto !important;
            }

            /* Optional: force page break before/after sections */
            .page-break {
                page-break-before: always;
            }
        }

        .receipt-form {
            background: #fff;
            padding: 40px 20px;
            border-radius: 8px;

            width: 90%;
            max-width: 1200px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .header {
            text-align: center;
        }

        .header h2 {
            margin-bottom: 10px;
        }

        .header .notes p {
            margin: 5px 0;
            font-size: 14px;
            color: #555;
        }

        .form-content {
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .form-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
            padding: 2.5px;
        }

        #course {
            width: 100%;
            /* Slightly wider than other inputs */
            max-width: 400px;
            /* Prevent it from becoming too large */
        }

        .form-group label {
            font-weight: bold;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
        }

        .form-group input:focus,
        .form-group select:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 3px rgba(0, 123, 255, 0.5);
        }

        .form-group button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        .form-group button:hover {
            background-color: #0056b3;
        }

        .table {
            margin-top: 20px;
            border-collapse: collapse;

        }

        .table th,
        .table td {
            border: 1px solid #ccc;
            padding: 10px;
            text-align: left;
        }

        .table th {
           
            background-color: #f2f2f2;
            font-weight: bold;
        }

        .table .grand-total {
            font-weight: bold;
            text-align: center;

        }

        .table .amount {
            text-align: right;
        }

        .table th {
            justify-content: center;
            text-align: center;
        }

        .amount-input {
            text-align: center;
            padding: 0 78px;

        }

        .total {
            text-align: center;
            padding: 0 78px;
        }


        .amount-words {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;

        }

        .amount-words input {
            width: 45%;
            padding: 10px;
            text-align: center;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .amount-words .rup {
            background-color: rgb(255, 255, 255);
            font-weight: bold;
        }

        .amount-words .only {
            background-color: rgb(255, 255, 255);
            width: 100%;

        }

      

        /* Styles for the new payment details section */
        .payment-details {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
            gap: 20px;
        }

        .payment-column {
            width: 23%;
        }

        .payment-column label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .payment-column input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .acc-int {

            width: 33.5%;
        }

        .extra-details {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            margin-top: 20px;
        }

        .extra-column {
            width: 32%;
        }

        .extra-column label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .extra-column input {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .form-group button,
        .form-group .reset-print-btns {
            width: 48%;
            padding: 10px;
            font-size: 16px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .form-group .print-btn {
            background-color: #28a745;
            color: #fff;
        }

        .form-group .reset-btn {
            background-color: #dc3545;
            color: #fff;
        }

        .reset-print-btns {
            display: flex;
            justify-content: space-between;
        }

        .footer p {
            display: flex;
            text-align: center;
            justify-content: center;
        }

        /* Styles for Receipt ID */
        #receipt-id {
            font-weight: bold;
            background-color: #f9f9f9;
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 10px;
            width: 20%;
            text-align: center;
            color: #333;
        }

        .receipt-form img {
            height: 100px;
            justify-content: left;
            display: flex;
        }

        @media print {

            #admittedby,
            #universityname,
            #examsession,
            #fullfee,
            #paidfee {
                display: none;
            }

            #lastPayPrint {
                display: none;
            }

            #paymentNum {
                display: none;
            }

            #fee-breakdown-section {
                display: none;
            }

            .dropdown-toggle {
                display: none;
            }

            #brk {
                display: none;
            }

            .update-student {
                display: none;
            }

            .print-btn,
            .reset-btn {
                display: none;
                /* Hide the buttons when printing */
            }

            .submit {
                display: none;
            }

            .receipt-form {
                visibility: visible;
            }

            title {
                display: none;
            }

            body {
                visibility: hidden;
            }

            .receipt-form {
                visibility: visible;
            }

            .submit {
                display: none;
            }

            .header {
                /* Make sure header is positioned relative to the document */
                margin-top: -20px;
                /* Move the header slightly upwards */
                top: -10px;
                /* Fine-tune the upward movement */
            }

            tfoot {
                display: table-row-group;
                /* Ensure it is treated as part of the table */

            }

        }

        #receiver_signature {
            border: none;
        }

        #account {
            border: none;
        }

        .sub-btn .submit {
            height: 33px;
            width: 10%;
            font-size: 15px;
            font-weight: 540;
            background-color: #ffe600;
            color: #000000;
            border: 1px solid white;
            border-radius: 7px;
        }

        .sub-btn .submit:hover {
            cursor: pointer;
            background-color: #236dc2;
            color: #ffffff;
        }

        @media (max-width: 768px) {

            /* Adjust breakpoint as needed */
            .sub-btn {

                width: 100%;
            }

            .submit {

                width: 100%;
            }

            .sub-btn .submit {
                height: 33px;
                width: 20%;
                font-size: 15px;
                font-weight: 520;
                background-color: #f5e029;
                color: #000000;
                border: 1px solid white;
                border-radius: 7px;
            }

            @page {
                size: auto;
                margin: 0mm;
            }

            body {
                margin: 0;
            }
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
        }

        .header img {
            width: 100px;
            /* Adjust size as needed */
            display: block;
            margin: 0 auto;
        }

        .header h2 {
            margin-top: -10px;
            /* Adjust to move the heading up */
            font-size: 24px;
        }

        .update-btn {
            display: flex;
            /* Moves button to the right */
            padding-bottom: 12px;
            /* Adds some spacing */
            padding-top: 5px;
        }

        .update-student {
            background-color: #3843e1;
            /* Green button */
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            font-weight: 500;
            border-radius: 7px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease;
        }

        .update-student:hover {
            background-color: #313ac1;
            /* Darker green on hover */
            transform: scale(1.05);
            /* Slight zoom effect */
        }

        #date_of_receipt {

            width: 200px;
            /* or try 150px, depending on your layout */
            padding: 8px;
            border: 1px solid #CCCCCC;

        }

        .rupedit {
            width: 100%;
            padding: 10px;
            text-align: center;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .only {
            width: 100%;
            padding: 10px;
            text-align: center;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .rupedit,
        .only {
            background-color: rgb(255, 255, 255);
            font-weight: bold;

        }

        #admitted_by {
            width: 100%;
        }

        #university_name {
            width: 100%;
        }

        #exam_session {
            width: 100%;
        }

        #course_fee,
        #prospectus_fee,
        #exam_fee,
        #other_fee,
        #discount {
            width: calc(100% - 20px);
        }

        #paymentNum {
            width: 104%;
            /* Slightly wider than other inputs */
            max-width: 405px;
            /* Prevent it from becoming too large */

        }


        .dropdown-toggle {
            background-color: #ffffff;
            color: rgb(0, 0, 0);
            padding: 6px 15px;
            border-radius: 6px;
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            font-weight: bold;
            font-size: 16px;
            user-select: none;
            margin-top: 25px;
            border: 1px solid #ccc;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .dropdown-toggle span {
            margin-left: 8px;
            transition: transform 0.3s ease;
        }

        #fee-breakdown-section {
            display: none;
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #ccc;
            border-radius: 8px;
            background-color: #f4f4f4;
            max-width: 400px;
        }

        input[type="number"] {

            width: 95%;
            padding: 7px;
            font-size: 14px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .total-display {
            margin-top: 20px;
            font-size: 18px;
            color: #2d3436;
        }

        @media print {
            .table {
                width: 100%;
                /* Reduce table width */
                margin: 0 auto;
                /* Center the table */
                font-size: 12px;
                /* Smaller font size */
            }

            .table th,
            .table td {
                padding: 5px;
                /* Reduce padding */
                border: 1px solid #ccc
                    /* Ensure borders are visible */
            }

            .table input[type="number"] {
                width: 80px;
                /* Reduce input field width */
                font-size: 10px;
                /* Smaller input text */
                border: none;
                /* Remove input borders for cleaner look */
                background: transparent;
                /* Transparent background */
                text-align: center;
                /* Center-align input numbers */
            }

            .table .amount {
                text-align: center;
                /* Center-align numbers in amount cells */
            }

            .table .grand-total {
                font-weight: bold;
            }

            .table #grand-total {
                font-size: 12px;
                /* Smaller total text */
                text-align: center;
                /* Center-align grand total */
            }

            /* Optional: Hide unnecessary elements */
            .table input::placeholder {
                color: transparent;
                /* Hide placeholder text */
            }
        }

        /* Styles for the main form */
        .form-group {
            margin-bottom: 8px;
        }

        label {
            font-weight: bold;
            display: block;

        }

        input,
        select {
            padding: 8px;
            width: 100%;
            margin-bottom: 10px;
            box-sizing: border-box;
        }

        .payment-section {
            display: none;
            border: 1px solid #ccc;
            padding: 5px;
            
        }

        @media print {

            input::placeholder,
            textarea::placeholder {
                color: transparent !important;
            }
        }

        @page {
            size: A4 portrait;

        }

        @media print {
            html,
            body {
                margin: 0;
                padding: 0;
                zoom: 0.85;
                font-family: Arial, sans-serif;
                color: #000;
            }
        
            .header {
                text-align: center;
                margin-bottom: 0;
            }
        
            .header img {
                width: 80px;
                height: auto;
                margin-bottom: 0;
            }
        
            .header h2 {
                font-size: 17px;
                margin: 0;
                font-weight: bold;
            }
        
            .header .notes p {
                font-size: 13px;
                margin: 0;
            }
        
            .form-grid {
                display: grid;
                grid-template-columns: repeat(3, 1fr);
                gap: 0;
                margin-top: 0;
            }
        
            .form-group {
                font-size: 15px;
                margin-bottom: 0;
            }
        
            .form-group label {
                display: block;
                font-weight: bold;
                margin-bottom: 2px;
            }
        
            .form-group input,
            .form-group select,
            .form-group textarea {
                width: 100%;
                padding: 1px;
                font-size: 14px;
                border: 1px solid #000;
                border-radius: 0;
                box-sizing: border-box;
                margin: 0;
            }
        
            #course,
            #specialization,
            #email,
            #ph {
                font-size: 15px !important;
                padding: 1px !important;
            }
        
            #address {
                border: 1px solid #000 !important;
                color: #000;
                resize: none;
                width: 100% !important;
                font-size: 14px !important;
                padding: 1px !important;
            }
        
            #date_of_receipt {
                border: 1px solid #000 !important;
                color: #000;
                resize: none;
                font-size: 15px !important;
            }
        
            input[type="text"],
            input[type="number"],
            input[type="date"] {
                font-size: 16px;
                padding: 2px;
                border: 1px solid #000;
                border-radius: 0;
                box-sizing: border-box;
            }
        
            .table {
                width: 100%;
                font-size: 17px;
                border-collapse: collapse;
                margin-top: 0;
                margin-bottom: 0;
                page-break-inside: avoid;
            }
        
            .table thead th,
            .table tfoot td,
            .table td {
                padding: 1px 2px;
                border: 1px solid #000;
                text-align: left;
                font-size: 14px;
            }
        
            .amount-input,
            .total {
                width: 90%;
                font-size: 17px;
                padding: 2px;
                margin: 0 auto;
                text-align: center;
                border: 1px solid #000;
                background: transparent;
                box-sizing: border-box;
            }
        
            #grand-total {
                font-weight: bold;
                font-size: 16px;
                text-align: center;
            }
        
            .grand-total {
                font-weight: bold;
                font-size: 16px;
            }
        
            .amount-words {
                font-size: 16px;
                margin-top: 0;
            }
        
            .amount-words input {
                width: 100%;
                font-size: 16px;
                padding: 2px;
                border: 1px solid #000;
                border-radius: 0;
                box-sizing: border-box;
            }
        
            .payment-details {
                display: flex;
                flex-wrap: wrap;
                gap: 0;
                margin-top: 0;
            }
        
            .payment-column {
                flex: 1 1 110px;
                padding: 0;
            }
        
            .payment-column label {
                font-size: 16px;
                display: block;
                margin-bottom: 0;
            }
        
            .payment-column input {
                font-size: 16px;
                padding: 1px;
                width: 100%;
                border: 1px solid #000;
                border-radius: 0;
                box-sizing: border-box;
            }
        
            .footer {
                font-size: 12px;
                text-align: center;
                margin-top: 0;
            }
        
            .notes p {
                color: #000 !important;
            }
        
            .no-print,
            .submit,
            .update-btn,
            .sub-btn,
            button,
            .reset-print-btns button:not(.print-btn) {
                display: none !important;
            }
        
            .no-print-textarea {
                display: none !important;
            }
        
            .print-address {
                display: block !important;
            }
        
            select {
                -webkit-appearance: none !important;
                -moz-appearance: none !important;
                appearance: none !important;
                background: none !important;
                border: 1px solid #000 !important;
                padding-right: 0 !important;
                font-size: 14px !important;
            }
        
            option[value=""] {
                display: none;
            }
        
            input[type="date"] {
                color: #000 !important;
            }
        
            #fee-breakdown-section {
                display: none !important;
            }
        
            .paynotshow {
                display: none !important;
            }
        
            .payment-section {
                border: 1px solid #000;
                padding: 1px 4px;
                margin-bottom: 0;
                font-size: 15px;
                page-break-inside: avoid;
            }
        
            .payment-section h3 {
                font-size: 14px;
                margin: 0;
            }
        
            .payment-section label {
                font-size: 16px;
                margin-bottom: 0;
                display: block;
            }
        
            .payment-section input {
                font-size: 16px;
                padding: 1px;
                width: 100%;
                border: 1px solid #000;
                border-radius: 0;
                box-sizing: border-box;
            }
        
            .fee-table,
            .amount-words,
            .signature-section,
            .footer {
                page-break-inside: avoid;
            }
        
            .table input::placeholder {
                color: transparent;
            }
        }

        .money-account-column {
            display: flex;
            align-items: center;
            /* vertically center label and input */
            gap: 5px;
            /* spacing between label and input */
        }

        .money-account-column label {
            white-space: nowrap;
            /* prevent label from breaking into multiple lines */
        }

        .acc-int {
            flex: 1;
            /* optional: let the input expand to fill space */
            padding: 6px;
        }

        .payment-section input {
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border: 1px solid #333;
            /* Match your other input borders */
            border-radius: 4px;
        }

        #amword {
            color: #000000;
            font-weight: 540;
        }

        .form-section {
            margin-bottom: 2px;
        }
        .form-group {
            margin-bottom: 1px;
        }
      
    </style>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>

<body>
    <form class="receipt-form" action="/money-recipt" method="post" id="paymentForm">

        <div class="header">

            <img src="https://media.licdn.com/dms/image/v2/D560BAQFVC52YqmPUdA/company-logo_200_200/company-logo_200_200/0/1692626704665?e=2147483647&v=beta&t=8NtQowu1te5Z34ukLiahUrYtv2Dz3t1JnEKg7PthdqY"
                alt="Random Image">
            <br>
            <h2>Money Receipt</h2>
            <br>
            <div class="notes">
                <p>#cheque payment are to realisation of the payment</p>
                <p>#payment once made is not refundable under any circumstances</p>
                <p>#Any dispute arising out of this receipt shall be subject to Kolkata jurisdiction only</p>
            </div><br>
        </div>


        <!-- <div class="form-group">
    <label for="receipt-id">Receipt ID</label>
    <input type="text" id="receipt-id" name="receipt-id" readonly>
    <button onclick="stopAutoIncrement()">Stop Incrementing ID</button>
<button onclick="restartAutoIncrement()">Restart Incrementing ID</button>

</div> -->

        <div class="form-group">
            <label for="id">ID</label>
            <input type="text" id="id" name="Stdid" placeholder="Enter id" required onblur=
            "fetchStudentDetails(this.value)" required
                style="width: 150px;">
        </div>

        <div class="form-content">
            <div class="form-section">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" id="name" name="Stdname" placeholder="Enter stundent name">
                </div>
                <div class="form-group">
                    <label for="address">Address</label>

                    <!-- Visible on screen -->
                    <textarea id="address" name="Stdaddress" placeholder="Enter address" rows="3"
                        class="no-print-textarea"
                        style="width: 100%; resize: vertical; border: 1px solid #CCCCCC; padding: 8px;"></textarea>

                    <!-- Hidden on screen, visible in print -->
                    <div class="print-address" style="display: none;">
                        <p id="printedAddress"
                            style="margin-top: 4px; font-size: 12px; border: 1px solid #000; padding: 8px;"></p>
                    </div>
                </div>



                <div class="form-group">
                    <label for="admission_date">Specialization</label>
                    <input type="text" id="admission_date" name="stdDateOfAdmission" placeholder="Enter specialization">
                </div>
                <div id="admittedby" class="form-group">
                    <label for="admitted_by">Admitted By</label>
                    <input type="text" id="admitted_by" name="StdAdmittedBy" placeholder="Enter admitted by name">
                </div>

                <div id="fullfee" class="form-group">
                    <label for="fees">Full Course Fees</label>
                    <input type="number" id="fees" name="Stdfullfees" placeholder="Enter full course fee" step="0.01">
                </div>

            </div>

            <div class="form-section">

                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" name="Stdphone" placeholder="Enter mobile number">
                </div>
                <div class="form-group">
                    <label for="course">Course</label>
                    <input type="text" id="course" name="Stdcourse" placeholder="Enter course name">
                </div>

                <div id="universityname" class="form-group">
                    <label for="university_name">University Name</label>
                    <input type="text" id="university_name" name="stdUniversityName"
                        placeholder="Enter university name">
                </div>

                <div class="form-group" id="paymentNum">
                    <label for="paymentNum" class="paymentNum">Payment Number</label>
                    <select id="id" name="stdpaymentnumber" required>
                        <option value="" disabled selected>Select payment number</option>
                        <option value="1">1st Payment</option>
                        <option value="2">2nd Payment</option>
                        <option value="3">3rd Payment</option>
                        <option value="4">4th Payment</option>
                        <option value="5">5th Payment</option>
                        <option value="6">6th Payment</option>
                        <option value="7">7th Payment</option>
                        <option value="8">8th Payment</option>
                        <option value="9">9th Payment</option>
                        <option value="10">10th Payment</option>
                        <option value="11">11th Payment</option>
                        <option value="12">12th Payment</option>
                        <option value="13">13th Payment</option>
                        <option value="14">14th Payment</option>
                        <option value="15">15th Payment</option>
                        <option value="16">16th Payment</option>
                        <option value="17">17th Payment</option>
                        <option value="18">18th Payment</option>
                        <option value="19">19th Payment</option>
                        <option value="20">20th Payment</option>
                        <option value="21">21th Payment</option>
                        <option value="22">22th Payment</option>
                        <option value="23">23th Payment</option>
                        <option value="24">24th Payment</option>
                        <option value="25">25th Payment</option>
                        <option value="26">26th Payment</option>
                        <option value="27">27th Payment</option>
                        <option value="28">28th Payment</option>
                        <option value="29">29th Payment</option>
                        <option value="30">30th Payment</option>
                        <option value="31">31th Payment</option>
                        <option value="32">32th Payment</option>
                        <option value="33">33th Payment</option>
                        <option value="34">34th Payment</option>
                        <option value="35">35th Payment</option>
                        <option value="36">37th Payment</option>
                        <option value="38">38th Payment</option>
                        <option value="39">39th Payment</option>
                        <option value="40">40th Payment</option>
                        <option value="41">41th Payment</option>
                        <option value="42">42th Payment</option>
                        <option value="43">43th Payment</option>
                        <option value="44">44th Payment</option>
                        <option value="45">45th Payment</option>
                        <option value="46">46th Payment</option>
                        <option value="47">47th Payment</option>
                        <option value="48">48th Payment</option>
                        <option value="49">49th Payment</option>
                        <option value="50">50th Payment</option>

                    </select>
                </div>
                <div id="paidfee" class="form-group">
                    <label for="paidfees">Paid Fees</label>
                    <input type="number" id="fees" name="Stdpaidfee" placeholder="Enter paid fee" required>
                </div>
            </div>

            <div class="form-section">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="Stdemail" placeholder="Enter email">
                </div>

                <div class="form-group">
                    <label for="admission_date">Mode</label>
                    <input type="text" id="admission_date" name="stdmode" placeholder="Enter course mode">
                </div>

                <div id="examsession" class="form-group">
                    <label for="exam_session">Exam Session</label>
                    <input type="text" id="exam_session" name="StdExamSession" placeholder="Enter exam session">
                </div>
                <div class="form-group" id="lastPayPrint">
                    <label for="admission_date">Last Payment Data</label>
                    <input type="date" id="admission_date" name="Stdlastpaiddate" required>
                </div>

                <div class="form-group" id="brk">
                    <div class="dropdown-toggle" onclick="toggleDropdown()">
                        Fees Breakdown <span id="arrow">▶</span>
                    </div>
                </div>

                <div id="fee-breakdown-section">
                    <div class="form-group">
                        <label for="fee_breakdown_textarea"><strong>Enter Fee Breakdown</strong></label>
                        <textarea id="fee_breakdown_textarea" name="stdtotalbreakdetails" class="message-box" rows="6"
                            placeholder="Enter fee details here"><%= typeof stdtotalbreakdetails !== 'undefined' ? stdtotalbreakdetails : '' %></textarea>
                    </div>


                    <!-- <div class="total-display">
                        <strong>Total Payable: <span id="total_fee"></span></strong>
                    </div>

                    <div class="form-group">
                        <label></label>
                        <input type="number" id="discount" placeholder="Enter Total Payable" name="brktotalpayble"
                            step="0.01">
                    </div> -->
                </div>




            </div>


        </div>
        </div>


        <table class="table">
            <thead>
                <tr>
                    <th>Particulars</th>
                    <th>Amount</th>
                </tr>
            </thead>
            <tbody class="tbodyedit">
                <tr>
                    <td>Consultancy Fee</td>
                    <td class="amount"><input type="number" name="consultancy_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Booking Fee</td>
                    <td class="amount"><input type="number" name="booking_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Processing Fee</td>
                    <td class="amount"><input type="number" name="procession_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Application Fee</td>
                    <td class="amount"><input type="number" name="application_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Loan Processing Fee</td>
                    <td class="amount"><input type="number" name="loan_procession_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Project Guidance Fee</td>
                    <td class="amount"><input type="number" name="project_guidance_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Project Development Fee</td>
                    <td class="amount"><input type="number" name="project_development_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Regd Fee (One Time)</td>
                    <td class="amount"><input type="number" name="regd_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
                <tr>
                    <td>Other Fee</td>
                    <td class="amount"><input type="number" name="other_fee" class="amount-input"
                            placeholder="Enter amount"></td>
                </tr>
            </tbody>

            <tfoot>
                <tr>
                    <td class="grand-total">Grand Total</td>
                    <td class="amount">
                        <input type="number" id="grand-total" name="grandtotal" placeholder="Total" class="total"
                            readonly>
                    </td>
                </tr>

            </tfoot>


        </table>

        <div class="amount-words">
            <input type="text" class="rupedit" placeholder="Rupees {in word} : " disabled>
            <input type="text" class="only" placeholder="" id="amword">
        </div>


        <!-- <div class="payment-details">
            <div class="payment-column">
                <label for="cheque_no">Cheque Payment</label><br>
                <label for="cheque_no">Cheque No</label>
                <input type="text" id="cheque_no" name="cheque_no" placeholder="Enter cheque number">

                <label for="cheque_date">Cheque Date</label>
                <input type="date" id="cheque_date" name="cheque_date">

                <label for="cheque_bank">Bank</label>
                <input type="text" id="cheque_bank" name="cheque_bank" placeholder="Enter bank name">

                <label for="cheque_branch">Branch</label>
                <input type="text" id="cheque_branch" name="cheque_branch" placeholder="Enter branch name">

                <label for="cheque_amount">Amount</label>
                <input type="number" id="cheque_amount" name="cheque_amount" placeholder="Enter amount">
            </div>

            <div class="payment-column">
                <label for="dd_no">Draft Payment</label><br>
                <label for="dd_no">DD No</label>
                <input type="text" id="dd_no" name="dd_no" placeholder="Enter DD number">

                <label for="dd_date">DD Date</label>
                <input type="date" id="dd_date" name="dd_date">

                <label for="dd_bank">Bank</label>
                <input type="text" id="dd_bank" name="dd_bank" placeholder="Enter bank name">

                <label for="dd_branch">Branch</label>
                <input type="text" id="dd_branch" name="dd_branch" placeholder="Enter branch name">

                <label for="dd_amount">Amount</label>
                <input type="number" id="dd_amount" name="dd_amount" placeholder="Enter amount">
            </div>

            <div class="payment-column">
                <label for="cash_amount">Cash Payment</label><br>
                <label for="cash_amount">Amount</label>
                <input type="number" id="cash_amount" name="cash_amount" placeholder="Enter amount">
            </div>

            <div class="payment-column">
                <label for="online_date">Online Payment</label><br>
                <label for="online_date">Date</label>
                <input type="date" id="online_date" name="online_date">

                <label for="online_bank">Bank</label>
                <input type="text" id="online_bank" name="online_bank" placeholder="Enter bank name">

                <label for="online_branch">Branch</label>
                <input type="text" id="online_branch" name="online_branch" placeholder="Enter branch name">

                <label for="online_amount">Amount</label>
                <input type="number" id="online_amount" name="online_amount" placeholder="Enter amount">
                <label for="online_amount">Upi Number </label>
                <input type="number" id="online_amount" name="online_amount" placeholder=" Enter upi number">
            </div>

        </div> -->

        <div class="form-group">
            <label for="payment_type" class="paynotshow" >Select Payment Type</label>
            <select id="payment_type" name="stdpaymode" class="paynotshow" onchange="handlePaymentSelection()">
                <option value="" class="paynotshow" >-- Select Payment Type --</option>
                <option value="cheque">Cheque Payment</option>
                <option value="draft">Draft Payment</option>
                <option value="cash">Cash Payment</option>
                <option value="online">Online Payment</option>
            </select>
        </div>

        <!-- Cheque Payment -->
        <div class="payment-section" id="cheque_section">
            <h3>Cheque Payment</h3>
            <label>Cheque No</label>
            <input type="text" name="cheque_no" placeholder="Enter cheque number">

            <label>Cheque Date</label>
            <input type="date" name="cheque_date">

            <label>Bank</label>
            <input type="text" name="cheque_bank" placeholder="Enter bank name">

            <label>Branch</label>
            <input type="text" name="cheque_branch" placeholder="Enter branch name">

            <label>Amount</label>
            <input type="number" name="cheque_amount" placeholder="Enter amount" id="cheam">
        </div>

        <!-- Draft Payment -->
        <div class="payment-section" id="draft_section">
            <h3>Draft Payment</h3>
            <label>DD No</label>
            <input type="text" name="dd_no" placeholder="Enter DD number">

            <label>DD Date</label>
            <input type="date" name="dd_date">

            <label>Bank</label>
            <input type="text" name="dd_bank" placeholder="Enter bank name">

            <label>Branch</label>
            <input type="text" name="dd_branch" placeholder="Enter branch name">

            <label>Amount</label>
            <input type="number" name="dd_amount" placeholder="Enter amount" id="cheam">
        </div>

        <!-- Cash Payment -->
        <div class="payment-section" id="cash_section">
            <h3>Cash Payment</h3>
            <label>Amount</label>
            <input type="number" name="cash_amount" placeholder="Enter amount" id="cheam">
        </div>

        <!-- Online Payment -->
        <div class="payment-section" id="online_section">
            <h3>Online Payment</h3>
            <label>Date</label>
            <input type="date" name="online_date">

            <label>Bank</label>
            <input type="text" name="online_bank" placeholder="Enter bank name">

            <label>Branch</label>
            <input type="text" name="online_branch" placeholder="Enter branch name">

            <label>Amount</label>
            <input type="number" name="online_amount" placeholder="Enter amount" id="cheam">

            <label>UPI Number</label>
            <input type="text" name="upi_number" placeholder="Enter UPI number">
        </div>

        <div class="money-account-section">
            <div class="money-account-column">
                <label for="account_no">Money Receipt Number : </label>
                <input class="acc-int" type="text" id="account_no" name="account_no" placeholder=""
                    style="width: 400px ;">

            </div>

            <div class="extra-details">
                <div class="extra-column">
                    <label for="date_of_receipt">Date of Receipt</label>
                    <input type="date" id="date_of_receipt" name="date_of_receipt">
                </div>
                <div class="extra-column">
                    <label for="receiver_signature">Receiver's Signature</label>
                    <input type="text" id="receiver_signature" name="receiver_signature" placeholder="">
                </div>
                <div class="extra-column">
                    <label for="account">Accountant</label>
                    <input type="text" id="account" name="account" placeholder="">
                </div>

            </div>
            <br>
            <div class="update-btn">
                <button class="update-student" onclick="redirectToUpdatePage()">Check Details</button>
            </div>

            <div class="sub-btn">
                <button type="submit" class="submit">Submit</button>
            </div>
            <div id="messageBox" class="message-box hidden"></div>
            <br>
            <form class="receipt-form">
                <div class="prnt">
                    <div class="form-group reset-print-btns">

                        <button type="button" class="print-btn" onclick="window.print()">Print</button>
                        <button type="reset" class="reset-btn">Reset</button>
                    </div>

                    <div class="footer">
                        <p>1/2d,BosePukur Prantik Pally, Ground Floor, Kolkata-700042 </p>
                    </div>
                </div> <br>

            </form>
        </div>

    </form>

    <script>
        document.getElementById("paymentForm").addEventListener("submit", async function (e) {
            e.preventDefault();

            const formData = new FormData(this);
            const formObj = {};
            formData.forEach((value, key) => formObj[key] = value);

            const messageBox = document.getElementById("messageBox");

            try {
                const response = await fetch("/money-recipt", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify(formObj)
                });

                const result = await response.json();

                if (result.success) {
                    messageBox.className = "message-box success";
                    messageBox.textContent = result.message;
                } else {
                    messageBox.className = "message-box error";
                    messageBox.textContent = result.message || "Something went wrong.";
                }

                messageBox.classList.remove("hidden");

                // Auto hide after 4 seconds
                setTimeout(() => {
                    messageBox.classList.add("hidden");
                }, 4000);

            } catch (error) {
                console.error("Error submitting form:", error);
                messageBox.className = "message-box error";
                messageBox.textContent = "Server error. Please try again.";
                messageBox.classList.remove("hidden");

                setTimeout(() => {
                    messageBox.classList.add("hidden");
                }, 4000);
            }
        });
    </script>
      
    <script>
        document.querySelectorAll('.amount-input').forEach(input => {
            input.addEventListener('input', () => {
                let total = 0;
                document.querySelectorAll('.amount-input').forEach(item => {
                    const value = parseFloat(item.value) || 0;
                    total += value;
                });
                document.getElementById('grand-total').value = total.toFixed(2);

                const grandTotalValue = total.toFixed(2);
                document.getElementById('rupees').value = `Rupees ${grandTotalValue}`;
                document.getElementById('only').value = `Only`;
            });
        });
        document.querySelectorAll('.amount-input').forEach(input => {
            input.addEventListener('input', () => {
                let total = 0;
                document.querySelectorAll('.amount-input').forEach(item => {
                    const value = parseFloat(item.value) || 0;
                    total += value;
                });
                document.getElementById('grand-total').value = total.toFixed(2);

                const grandTotalValue = total.toFixed(2);
                document.getElementById('rupees').value = `Rupees ${grandTotalValue}`;
                document.getElementById('only').value = `Only`;
            });
        });



        document.addEventListener("DOMContentLoaded", function () {
            // Retrieve the last ID from localStorage or start with a base ID
            let baseId = 1000; // Starting point
            let lastId = localStorage.getItem("lastReceiptId") || baseId;

            // Check if the ID incrementing should stop
            const stopIncrementing = localStorage.getItem("stopIncrementing") === "true";

            if (stopIncrementing) {
                // If incrementing is stopped, display the current ID without updating
                document.getElementById("receipt-id").value = `REC-${lastId}`;
                return; // Exit the script here to prevent incrementing
            }

            // Increment the ID
            let newId = parseInt(lastId) + 1;

            // Format with a prefix (e.g., "REC-1001")
            let formattedId = `REC-${newId}`;

            // Display the formatted ID in the form
            document.getElementById("receipt-id").value = formattedId;

            // Save the numeric part of the new ID back to localStorage
            localStorage.setItem("lastReceiptId", newId);
        });

        // Function to stop incrementing
        function stopAutoIncrement() {
            localStorage.setItem("stopIncrementing", "true");
        }

        // Function to restart incrementing
        function restartAutoIncrement() {
            localStorage.setItem("stopIncrementing", "false");
        }

        function redirectToUpdatePage() {
            window.location.href = "AccountantUpdateStudentDetails"; // Change this to your actual page URL
        }

        function redirectToUpdatePage() {
            window.open('AccountantUpdateStudentDetails');
        }



        function toggleDropdown() {
            const section = document.getElementById("fee-breakdown-section");
            const arrow = document.getElementById("arrow");

            // Toggle visibility and arrow icon
            const isHidden = section.style.display === "none" || section.style.display === "";
            section.style.display = isHidden ? "block" : "none";
            arrow.textContent = isHidden ? "🔽" : "▶";
        }

        function calculateTotal() {
            // Helper function to safely parse input values
            const getFee = (id) => {
                const value = document.getElementById(id).value;
                const parsed = parseFloat(value);
                return isNaN(parsed) || parsed < 0 ? 0 : parsed; // Return 0 for invalid or negative inputs
            };

            // Get all fee inputs
            const courseFee = getFee("course_fee");
            const prospectusFee = getFee("prospectus_fee");
            const examFee = getFee("exam_fee");
            const otherFee = getFee("other_fee");
            const discountPercent = getFee("discount");

            // Calculate total before discount
            const grossTotal = courseFee + prospectusFee + examFee + otherFee;

            // Calculate discount amount based on percentage
            const discountAmount = (discountPercent / 100) * grossTotal;

            // Final amount after discount
            const finalTotal = Math.max(0, grossTotal - discountAmount);

            // Update UI with formatted total
            document.getElementById("total_fee").textContent = finalTotal.toFixed(2);
        }

    </script>
    <script>
        window.addEventListener("beforeprint", function () {
            const addressValue = document.getElementById("address").value;
            document.getElementById("printedAddress").textContent = addressValue;
        });
    </script>


    <script>
        // Function to remove the "Select a course" option before printing
        function removeSelectCourse() {
            const select = document.getElementById('course');
            const firstOption = select.querySelector('.selectcourse');
            if (firstOption) {
                firstOption.style.display = 'none';
            }
        }

        // Function to restore the "Select a course" option after printing
        function restoreSelectCourse() {
            const select = document.getElementById('course');
            const firstOption = select.querySelector('.selectcourse');
            if (firstOption) {
                firstOption.style.display = 'block';
            }
        }

        // Listen for the beforeprint and afterprint events
        window.addEventListener('beforeprint', removeSelectCourse);
        window.addEventListener('afterprint', restoreSelectCourse);
    </script>

    <script>
        // Listen for print events
        window.onbeforeprint = function () {
            // Find the select element and its first option
            const courseSelect = document.getElementById('course');
            const firstOption = courseSelect.querySelector('option[value=""]');

            // Remove the first option text when printing
            if (firstOption) {
                firstOption.textContent = ''; // Removes the text
            }
        };

        // Optional: Reset text after printing (if needed)
        window.onafterprint = function () {
            const courseSelect = document.getElementById('course');
            const firstOption = courseSelect.querySelector('option[value=""]');
            if (firstOption) {
                firstOption.textContent = 'Select a course'; // Reset the text
            }
        };
    </script>
    <script>
        const sections = {
            cheque: document.getElementById("cheque_section"),
            draft: document.getElementById("draft_section"),
            cash: document.getElementById("cash_section"),
            online: document.getElementById("online_section")
        };

        function handlePaymentSelection() {
            const selected = document.getElementById("payment_type").value;

            // Hide all sections first
            for (let key in sections) {
                sections[key].style.display = "none";
                sections[key].classList.remove("printable");
            }

            // Show selected section
            if (selected && sections[selected]) {
                sections[selected].style.display = "block";
                sections[selected].classList.add("printable");
            }
        }

        function printSelected() {
            window.print();
        }
    </script>

    <script>
        function calculateTotal() {
            const inputs = document.querySelectorAll('.amount-input');
            let sum = 0;
            inputs.forEach(input => {
                const value = parseFloat(input.value);
                if (!isNaN(value)) sum += value;
            });
            return sum;
        }

        function updateTotalAndSave() {
            const total = calculateTotal();
            document.getElementById('grand-total').value = total;
            sessionStorage.setItem('grandTotal', total);
        }

        function attachListeners() {
            const inputs = document.querySelectorAll('.amount-input');
            inputs.forEach(input => {
                input.addEventListener('input', updateTotalAndSave);
            });
        }

        // This will run on every page load (or refresh)
        document.addEventListener('DOMContentLoaded', () => {
            // Optional: clear grand total on every fresh load
            sessionStorage.removeItem('grandTotal');

            const savedTotal = sessionStorage.getItem('grandTotal');
            if (savedTotal) {
                document.getElementById('grand-total').value = savedTotal;
            }

            attachListeners();
        });

        // You can still use this function after print if needed
        window.clearPaymentForm = function () {
            document.querySelectorAll('.amount-input').forEach(input => input.value = '');
            document.getElementById('grand-total').value = '';
            sessionStorage.removeItem('grandTotal');
        };
    </script>



    <!-- <script>
        async function fetchStudentDetails() {
            const studentId = document.getElementById('Stdid').value.trim();
            if (!studentId) return;

            try {
                const res = await fetch(`/api/student/${Stdid}`);
                if (!res.ok) throw new Error('Student not found');
                const data = await res.json();

                document.getElementById('name').value = data.name || '';
                document.getElementById('email').value = data.email || '';
                document.getElementById('address').value = data.address || '';
                document.getElementById('course').value = data.course || '';
                document.getElementById('specialization').value = data.specialization || '';
                document.getElementById('phone').value = data.phone || '';
                document.getElementById('mode').value = data.mode || '';
                document.getElementById('examSession').value = data.examSession || '';
                // Fill others similarly
            } catch (error) {
                alert(error.message);
            }
        }
    </script> -->


    <script>
        function fetchStudentDetails(studentId) {
            if (!studentId) return;

            fetch(`/get-student/${studentId}`)
                .then(res => res.json())
                .then(data => {
                    if (data.success) {
                        document.getElementById('name').value = data.student.name || '';
                        document.getElementById('address').value = data.student.address || '';
                        document.getElementById('admission_date').value = data.student.admission_date || '';
                        document.getElementById('admitted_by').value = data.student.admitted_by || '';
                        document.getElementById('fees').value = data.student.fees || '';
                        document.getElementById('phone').value = data.student.phone || '';
                        document.getElementById('course').value = data.student.course || '';
                        document.getElementById('university_name').value = data.student.university_name || '';
                        document.getElementById('id').value = data.student.id || '';
                        document.getElementById('email').value = data.student.email || '';
                        document.getElementById('exam_session').value = data.student.exam_session || '';
                        document.getElementById('mode').value = data.student.mode || '';

                        // Fill more fields as needed
                    } else {
                        alert("Student not found");
                    }
                })
                .catch(err => {
                    console.error("Error fetching student details:", err);
                });
        }
    </script>



</body>

</html>